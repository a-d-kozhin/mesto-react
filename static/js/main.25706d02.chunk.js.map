{"version":3,"sources":["images/logo-2.svg","images/edit-avatar.svg","images/success.svg","images/fail.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/InfoTooltip.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/ProtectedRoute.js","components/Login.js","components/Register.js","utils/api.js","utils/utils.js","auth.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","props","email","onLogOut","className","href","src","logo","alt","path","to","exact","onClick","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","Provider","value","type","style","backgroundImage","link","name","length","Main","onEditAvatar","onAddPlace","onEditProfile","cards","user","editAvatar","avatar","about","map","cardElement","key","Footer","InfoToolTip","toolTipSuccess","isOpen","onClose","message","successPic","failPic","PopupWithForm","title","children","onSubmit","action","method","noValidate","EditProfilePopup","onUpdateUser","useState","setName","job","setJob","useEffect","e","preventDefault","onChange","target","placeholder","required","minLength","maxLength","id","EditAvatarPopup","onUpdateAvatar","avatarInput","useRef","current","ref","AddPlacePopup","titleInput","linkInput","url","ImagePopup","ProtectedRoute","Component","component","loggedIn","Login","onLogin","history","useHistory","setEmail","password","setPassword","evt","then","push","catch","err","console","log","Register","onRegister","api","headers","this","authorization","response","ok","json","Promise","reject","status","error","fetch","_handleResponse","_handleError","obj","body","JSON","stringify","BASE_URL","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isInfoToolTipPopupOpen","setInfoToolTipPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","userData","setUserData","setToolTipSuccess","setMessage","closeAllPopups","document","querySelector","classList","remove","all","getInfo","getInitialCards","userProfile","cardsArray","tokenCheck","token","jwt","localStorage","getItem","res","data","removeItem","setItem","auth","dislikeCard","newCard","newCards","c","likeCard","cardToDelete","removeCard","filter","editInfo","updatedUser","sendElement","changeAvatar","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"oGAAAA,EAAOC,QAAU,IAA0B,oC,mBCA3CD,EAAOC,QAAU,IAA0B,yC,mBCA3CD,EAAOC,QAAU,IAA0B,qC,mBCA3CD,EAAOC,QAAU,IAA0B,kC,2LC6B5BC,MAvBf,SAAgBC,GAAQ,IACdC,EAAoBD,EAApBC,MAAOC,EAAaF,EAAbE,SACf,OACE,4BAAQC,UAAU,UAChB,uBAAGC,KAAK,KAAKD,UAAU,QACrB,yBAAKE,IAAKC,IAAMC,IAAI,qGAA+BJ,UAAU,4BAE/D,yBAAKA,UAAU,UACb,kBAAC,IAAD,CAAOK,KAAK,YACV,kBAAC,IAAD,CAAMC,GAAG,YAAYN,UAAU,yBAA/B,mCAEF,kBAAC,IAAD,CAAOK,KAAK,YACV,kBAAC,IAAD,CAAMC,GAAG,YAAYN,UAAU,yBAA/B,uEAEF,kBAAC,IAAD,CAAOO,OAAK,EAACF,KAAK,KAChB,uBAAGL,UAAU,iBAAiBF,GAC9B,kBAAC,IAAD,CAAMQ,GAAG,YAAYE,QAAST,EAAUC,UAAU,oDAAlD,sC,iBCpBGS,EAAqBC,IAAMC,gBCgDzBC,MA/Cf,YAAgE,IAAhDC,EAA+C,EAA/CA,KAAMC,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,aACvCC,EAAcP,IAAMQ,WAAWT,GAC/BU,EAAQN,EAAKO,MAAMC,MAAQJ,EAAYI,IAEvCC,EAAyB,wCACIH,EAC/B,iCACA,iCAGEI,EAAUV,EAAKW,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEL,MAAQJ,EAAYI,OAErDM,EAAuB,iBACjBJ,EACR,mDACA,wBAeJ,OACE,kBAACd,EAAmBmB,SAApB,CAA6BC,MAAOZ,GAClC,wBAAIjB,UAAU,WACZ,4BAAQ8B,KAAK,SAAS9B,UAAWsB,EAA2Bd,QAPlE,WACEQ,EAAaH,MAOT,yBAAKkB,MAAO,CAAEC,gBAAgB,OAAD,OAASnB,EAAKoB,KAAd,MAAyBjC,UAAU,iBAAiBI,IAAKS,EAAKqB,KAAM1B,QAhBvG,WACEM,EAAYD,MAgBR,yBAAKb,UAAU,+BACb,wBAAIA,UAAU,kBAAd,UAAmCa,EAAKqB,OACxC,yBAAKlC,UAAU,6BACb,4BAAQ8B,KAAK,SAAS9B,UAAW2B,EAAyBnB,QAhBpE,WACEO,EAAWF,MAgBH,uBAAGb,UAAU,wBAAb,UAAwCa,EAAKW,MAAMW,cCChDC,MAtCf,YAA0G,IAA1FC,EAAyF,EAAzFA,aAAcC,EAA2E,EAA3EA,WAAYxB,EAA+D,EAA/DA,YAAayB,EAAkD,EAAlDA,cAAeC,EAAmC,EAAnCA,MAAOzB,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,aAEjFyB,EAAO/B,IAAMQ,WAAWT,GAE9B,OACE,0BAAMT,UAAU,WAEd,6BAASA,UAAU,WAEjB,6BACE,4BAAQ8B,KAAK,SAAS9B,UAAU,yBAAyBQ,QAAS6B,GAChE,yBAAKrC,UAAU,4BAA4BE,IAAKwC,IAAYtC,IAAI,KAChE,yBAAK2B,MAAO,CAAEC,gBAAgB,OAAD,OAASS,EAAKE,OAAd,MAA2BvC,IAAI,kFAAiBJ,UAAU,sBAI3F,yBAAKA,UAAU,iBACb,wBAAIA,UAAU,iBAAiByC,EAAKP,MACpC,4BAAQJ,KAAK,SAAS9B,UAAU,8BAA8BQ,QAAS+B,IACvE,uBAAGvC,UAAU,gBAAgByC,EAAKG,QAEpC,4BAAQd,KAAK,SAAS9B,UAAU,6BAA6BQ,QAAS8B,KAGxE,wBAAItC,UAAU,YACXwC,EAAMK,KAAI,SAACC,GAAD,OACT,kBAAC,EAAD,CACAjC,KAAMiC,EACNhC,YAAaA,EACbiC,IAAKD,EAAYzB,IACjBN,WAAYA,EACZC,aAAcA,UC1BTgC,MARf,WACE,OACE,4BAAQhD,UAAU,UAChB,uBAAGA,UAAU,qBAAb,wE,kCCcSiD,MAff,YAAoE,IAA7CC,EAA4C,EAA5CA,eAAgBC,EAA4B,EAA5BA,OAAQC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,QACtD,OACE,oCACE,6BAASrD,UAAS,2BAAsBmD,EAAS,eAAiB,GAAhD,MAChB,yBAAKnD,UAAU,wCAAwCQ,QAAS4C,IAChE,yBAAKpD,UAAU,0CACZkD,EAAiB,yBAAKhD,IAAKoD,IAAYlD,IAAI,KAAO,yBAAKF,IAAKqD,IAASnD,IAAI,KAC1E,wBAAIJ,UAAU,kCAAkCqD,GAChD,4BAAQvB,KAAK,SAAS9B,UAAU,sDAAsDQ,QAAS4C,QCM1FI,MAhBf,YAA8E,IAArDtB,EAAoD,EAApDA,KAAMuB,EAA8C,EAA9CA,MAAOC,EAAuC,EAAvCA,SAAUP,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,QAASO,EAAY,EAAZA,SAC/D,OACE,oCACE,6BAAS3D,UAAS,sBAAiBkC,EAAjB,YAAyBiB,EAAS,eAAiB,GAAnD,MAChB,yBAAKnD,UAAU,wCAAwCQ,QAAS4C,IAChE,0BAAMpD,UAAS,wDAAmDkC,GAAQA,KAAK,eAAe0B,OAAO,IAAIC,OAAO,OAC9GC,YAAU,EAACH,SAAUA,GACrB,wBAAI3D,UAAU,gBAAgByD,GAC7BC,EACD,4BAAQ5B,KAAK,SAAS9B,UAAU,yDAAyDQ,QAAS4C,QC6D7FW,MApEf,YAA4D,IAAjCZ,EAAgC,EAAhCA,OAAQC,EAAwB,EAAxBA,QAASY,EAAe,EAAfA,aAAe,EACjCtD,IAAMuD,SAAS,IADkB,mBAClD/B,EADkD,KAC5CgC,EAD4C,OAEnCxD,IAAMuD,SAAS,IAFoB,mBAElDE,EAFkD,KAE7CC,EAF6C,KAiBnDnD,EAAcP,IAAMQ,WAAWT,GAMrC,OALAC,IAAM2D,WAAU,WACdH,EAAQjD,EAAYiB,MACpBkC,EAAOnD,EAAY2B,SAClB,CAACO,EAAQlC,EAAYiB,KAAMjB,EAAY2B,QAGxC,kBAAC,EAAD,CACEa,MAAM,4HACNvB,KAAK,UACLiB,OAAQA,EACRC,QAASA,EACTO,SAjBJ,SAAsBW,GACpBA,EAAEC,iBACFP,EAAa,CAAC9B,OAAMU,MAAOuB,MAiBzB,2BACEK,SA5BN,SAA0BF,GACxBJ,EAAQI,EAAEG,OAAO5C,QA4BbA,MAAOK,EACPlC,UAAU,sCACV8B,KAAK,OAAO4C,YAAY,qBACxBxC,KAAK,OACLyC,UAAQ,EACRC,UAAU,IACVC,UAAU,KACVC,GAAG,eACL,0BACEA,GAAG,mBACH9E,UAAU,gBAFZ,uEAIA,2BACEwE,SAtCN,SAAyBF,GACvBF,EAAOE,EAAEG,OAAO5C,QAsCZA,MAAOsC,EACPnE,UAAU,qCACV8B,KAAK,OACL4C,YAAY,yDACZxC,KAAK,QACLyC,UAAQ,EACRC,UAAU,IACVC,UAAU,MACVC,GAAG,cACL,0BACEA,GAAG,kBACH9E,UAAU,gBAFZ,uEAIA,4BACE8B,KAAK,SACL9B,UAAU,qDAFZ,4DCpBS+E,MAzCf,YAA6D,IAAnC5B,EAAkC,EAAlCA,OAAQC,EAA0B,EAA1BA,QAAS4B,EAAiB,EAAjBA,eAEnCC,EAAcvE,IAAMwE,SAU1B,OACE,kBAAC,EAAD,CACEzB,MAAM,wFACNvB,KAAK,SACLiB,OAAQA,EACRC,QAASA,EACTO,SAbJ,SAAsBW,GACpBA,EAAEC,iBACFS,EAAe,CACbrC,OAAQsC,EAAYE,QAAQtD,UAY5B,2BACEuD,IAAKH,EACLjF,UAAU,wCACV8B,KAAK,MACL4C,YAAY,qGACZI,GAAG,eACH5C,KAAK,SACLyC,UAAQ,IAEV,0BACEG,GAAG,qBACH9E,UAAU,gBAFZ,uEAIA,4BACE8B,KAAK,SACL9B,UAAU,oDAFZ,4DC2BSqF,MA5Df,YAAyD,IAAhClC,EAA+B,EAA/BA,OAAQC,EAAuB,EAAvBA,QAASd,EAAc,EAAdA,WAElCgD,EAAa5E,IAAMwE,SACnBK,EAAY7E,IAAMwE,SAUxB,OACE,kBAAC,EAAD,CACEzB,MAAM,gEACNvB,KAAK,UACLiB,OAAQA,EACRC,QAASA,EACTO,SAdJ,SAAsBW,GACpBA,EAAEC,iBACFjC,EAAW,CACTmB,MAAO6B,EAAWH,QAAQtD,MAC1B2D,IAAKD,EAAUJ,QAAQtD,UAYvB,2BACEuD,IAAKE,EACLtF,UAAU,uCACV8B,KAAK,OACL4C,YAAY,mDACZxC,KAAK,QACLyC,UAAQ,EACRG,GAAG,cACHF,UAAU,IACVC,UAAU,OAEZ,0BACEC,GAAG,oBACH9E,UAAU,gBAFZ,uEAKA,2BACEoF,IAAKG,EACLvF,UAAU,qCACV8B,KAAK,MACL4C,YAAY,qGACZI,GAAG,YACH5C,KAAK,MACLyC,UAAQ,IAEV,0BACEG,GAAG,kBACH9E,UAAU,gBAFZ,uEAKA,4BACE8B,KAAK,SACL9B,UAAU,qDAFZ,4DCjCSyF,MAnBf,YAAwC,IAAlB5E,EAAiB,EAAjBA,KAAMuC,EAAW,EAAXA,QACtBlB,EAAO,GACPD,EAAO,GAKX,OAJIpB,IACFqB,EAAOrB,EAAKqB,KACZD,EAAOpB,EAAKoB,MAGZ,6BAASjC,UAAS,4BAAwBa,EAAQ,eAAiB,GAAjD,MAChB,yBAAKb,UAAU,sCAAsCQ,QAAS4C,IAC9D,yBAAKpD,UAAU,wBACb,yBAAK+B,MAAO,CAAEC,gBAAgB,OAAD,OAASC,EAAT,MAAoB7B,IAAK8B,EAAMlC,UAAU,uBACtE,uBAAGA,UAAU,wBAAwBkC,GACrC,4BAAQJ,KAAK,SAAS9B,UAAU,uDAAuDQ,QAAS4C,O,QCHzFsC,EATQ,SAAC,GAAyC,IAA5BC,EAA2B,EAAtCC,UAAyB/F,EAAa,6BAC9D,OACE,kBAAC,IAAD,MAEI,kBAAMA,EAAMgG,SAAW,kBAACF,EAAc9F,GAAY,kBAAC,IAAD,CAAUS,GAAG,kBC4BxDwF,MAhCf,YAA6B,IAAZC,EAAW,EAAXA,QACTC,EAAUC,cADU,EAEAhC,mBAAS,IAFT,mBAEnBnE,EAFmB,KAEZoG,EAFY,OAGMjC,mBAAS,IAHf,mBAGnBkC,EAHmB,KAGTC,EAHS,KAmB1B,OACE,yBAAKpG,UAAU,QACb,wBAAIA,UAAU,gBAAd,4BACA,0BAAMA,UAAU,mCAAmC2D,SAZlC,SAAC0C,GACpBA,EAAI9B,iBAEJwB,EAAQjG,EAAOqG,GACZG,MAAK,kBARRJ,EAAS,SACTE,EAAY,OAQTE,MAAK,kBAAMN,EAAQO,KAAK,QACxBC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QAO1B,2BAAOzG,UAAU,cAAc8E,GAAG,QAAQH,UAAQ,EAACzC,KAAK,QAAQJ,KAAK,QAAQ4C,YAAY,QAAQ7C,MAAO/B,EAAO0E,SAAU,SAAC6B,GAAD,OAASH,EAASG,EAAI5B,OAAO5C,UACtJ,2BAAO7B,UAAU,cAAc8E,GAAG,WAAWH,UAAQ,EAACzC,KAAK,WAAWJ,KAAK,WAAW4C,YAAY,uCAAS7C,MAAOsE,EAAU3B,SAAU,SAAC6B,GAAD,OAASD,EAAYC,EAAI5B,OAAO5C,UACtK,4BAAQ7B,UAAU,eAAe8B,KAAK,UAAtC,mCAEF,kBAAC,IAAD,CAAMxB,GAAG,YAAYN,UAAU,qBAA/B,0MCGS4G,MA9Bf,YAAmC,IAAfC,EAAc,EAAdA,WAAc,EACN5C,mBAAS,IADH,mBACzBnE,EADyB,KAClBoG,EADkB,OAEAjC,mBAAS,IAFT,mBAEzBkC,EAFyB,KAEfC,EAFe,KAiBhC,OACE,yBAAKpG,UAAU,QACb,wBAAIA,UAAU,gBAAd,sEACA,0BAAMA,UAAU,sCAAsC2D,SAXrC,SAAC0C,GACpBA,EAAI9B,iBAEJsC,EAAW/G,EAAOqG,GACfG,MAAK,kBARRJ,EAAS,SACTE,EAAY,OAQTI,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QAO1B,2BAAOzG,UAAU,cAAc8E,GAAG,QAAQ5C,KAAK,QAAQJ,KAAK,QAAQ4C,YAAY,QAAQ7C,MAAO/B,EAAO0E,SAAU,SAAC6B,GAAD,OAASH,EAASG,EAAI5B,OAAO5C,UAC7I,2BAAO7B,UAAU,cAAc8E,GAAG,WAAW5C,KAAK,WAAWJ,KAAK,WAAW4C,YAAY,uCAAS7C,MAAOsE,EAAU3B,SAAU,SAAC6B,GAAD,OAASD,EAAYC,EAAI5B,OAAO5C,UAC7J,4BAAQ7B,UAAU,eAAe8B,KAAK,UAAtC,iHAEF,kBAAC,IAAD,CAAMxB,GAAG,YAAYN,UAAU,qBAA/B,yJ,gBCwFO8G,EAAM,IAjHnB,WACE,cAAoC,IAAtBtB,EAAqB,EAArBA,IAAqB,IAAhBuB,eAAgB,MAAN,GAAM,sBACjCC,KAAKxB,IAAMA,EACXwB,KAAKD,QAAUA,EACfC,KAAKC,cAAgBF,EAAQE,cAJjC,4DASkBC,GACd,OAAIA,EAASC,GACJD,EAASE,OAETC,QAAQC,OAAR,4CAAoDJ,EAASK,WAb1E,mCAkBeC,GAEX,OADAd,QAAQc,MAAR,kCAAyCA,IAClCH,QAAQC,OAAOE,EAAMnE,WApBhC,gCAwBa,IAAD,OACR,OAAOoE,MAAM,GAAD,OAAIT,KAAKxB,IAAT,YAAwB,CAAEuB,QAASC,KAAKD,UACjDT,MAAK,SAAAY,GAAQ,OAAI,EAAKQ,gBAAgBR,MACtCV,MAAMQ,KAAKW,gBA3BlB,wCA+BqB,IAAD,OAChB,OAAOF,MAAM,GAAD,OAAIT,KAAKxB,IAAT,SAAqB,CAAEuB,QAASC,KAAKD,UAC9CT,MAAK,SAAAY,GAAQ,OAAI,EAAKQ,gBAAgBR,MACtCV,MAAMQ,KAAKW,gBAlClB,+BAsCWC,GAAM,IAAD,OACZ,OAAOH,MAAM,GAAD,OAAIT,KAAKxB,IAAT,YACV,CACE3B,OAAQ,QACRkD,QAASC,KAAKD,QACdc,KAAMC,KAAKC,UAAU,CACnB7F,KAAM0F,EAAI1F,KACVU,MAAOgF,EAAIhF,UAGd0D,MAAK,SAAAY,GAAQ,OAAI,EAAKQ,gBAAgBR,MACtCV,MAAMQ,KAAKW,gBAjDlB,kCAqDcC,GAAM,IAAD,OACf,OAAOH,MAAM,GAAD,OAAIT,KAAKxB,IAAT,SACV,CACE3B,OAAQ,OACRkD,QAASC,KAAKD,QACdc,KAAMC,KAAKC,UAAU,CACnB7F,KAAM0F,EAAInE,MACVxB,KAAM2F,EAAIpC,QAGbc,MAAK,SAAAY,GAAQ,OAAI,EAAKQ,gBAAgBR,MACtCV,MAAMQ,KAAKW,gBAhElB,mCAoEeC,GAAM,IAAD,OAChB,OAAOH,MAAM,GAAD,OAAIT,KAAKxB,IAAT,mBACV,CACE3B,OAAQ,QACRkD,QAASC,KAAKD,QACdc,KAAMC,KAAKC,UAAU,CACnBpF,OAAQiF,EAAIjF,WAGf2D,MAAK,SAAAY,GAAQ,OAAI,EAAKQ,gBAAgBR,MACtCV,MAAMQ,KAAKW,gBA9ElB,iCAkFatG,GAAM,IAAD,OACd,OAAOoG,MAAM,GAAD,OAAIT,KAAKxB,IAAT,iBAAqBnE,GAAO,CACtCwC,OAAQ,SACRkD,QAASC,KAAKD,UAEbT,MAAK,SAAAY,GAAQ,OAAI,EAAKQ,gBAAgBR,MACtCV,MAAMQ,KAAKW,gBAxFlB,+BA4FWtG,GAAM,IAAD,OACZ,OAAOoG,MAAM,GAAD,OAAIT,KAAKxB,IAAT,uBAA2BnE,GAAO,CAC5CwC,OAAQ,MACRkD,QAASC,KAAKD,UAEbT,MAAK,SAAAY,GAAQ,OAAI,EAAKQ,gBAAgBR,MACtCV,MAAMQ,KAAKW,gBAlGlB,kCAsGctG,GAAM,IAAD,OACf,OAAOoG,MAAM,GAAD,OAAIT,KAAKxB,IAAT,uBAA2BnE,GAAO,CAC5CwC,OAAQ,SACRkD,QAASC,KAAKD,UAEbT,MAAK,SAAAY,GAAQ,OAAI,EAAKQ,gBAAgBR,MACtCV,MAAMQ,KAAKW,kBA5GlB,KAiHmB,CCpHG,CACpBnC,IAAK,+CACLuB,QAAS,CACPE,cAAe,uCACf,eAAgB,sB,QCJPe,EAAW,gCAEXjB,EAAU,CACrB,eAAgB,oBCoQHkB,MArPf,WAAgB,IAAD,EAC6ChE,oBAAS,GADtD,mBACNiE,EADM,KACkBC,EADlB,OAE2ClE,oBAAS,GAFpD,mBAENmE,EAFM,KAEiBC,EAFjB,OAGuCpE,oBAAS,GAHhD,mBAGNqE,EAHM,KAGeC,EAHf,OAI6CtE,oBAAS,GAJtD,mBAINuE,EAJM,KAIkBC,EAJlB,OAK2BxE,qBAL3B,mBAKNyE,EALM,KAKQC,EALR,OAMyB1E,mBAAS,CAAE/B,KAAM,GAAIU,MAAO,KANrD,mBAMN3B,EANM,KAMO2H,EANP,OAOa3E,mBAAS,IAPtB,mBAONzB,EAPM,KAOCqG,EAPD,OAQmB5E,oBAAS,GAR5B,mBAQN4B,EARM,KAQIiD,EARJ,QASmB7E,mBAAS,CAAEnE,MAAO,GAAIuB,IAAK,KAT9C,qBASN0H,GATM,MASIC,GATJ,SAU+B/E,oBAAS,GAVxC,qBAUNf,GAVM,MAUU+F,GAVV,SAWiBhF,mBAAS,IAX1B,qBAWNZ,GAXM,MAWG6F,GAXH,MAiFb,SAASC,KACHC,SAASC,cAAc,mBACzBD,SAASC,cAAc,iBAAiBC,UAAUC,OAAO,gBACzDlB,GAAuB,GACvBF,GAAwB,GACxBI,GAAqB,GACrBI,EAAgB,OA1EpBtE,qBAAU,WACRgD,QAAQmC,IAAI,CAAC1C,EAAI2C,UAAW3C,EAAI4C,oBAC7BpD,MAAK,YAAgC,IAAD,mBAA7BqD,EAA6B,KAAhBC,EAAgB,KACnChB,EAAee,GACfd,EAASe,QAEZ,IAwEH,IAAM5D,GAAUC,cAoBV4D,GAAa,WACjB,ID5FuBC,EC4FnBC,EAAMC,aAAaC,QAAQ,OAC3BF,ID7FmBD,EC8FLC,ED7FbtC,MAAM,GAAD,OAAIO,EAAJ,aAAyB,CACnCnE,OAAQ,MACRkD,QAAQ,2BACHA,GADE,IAEL,cAAgB,UAAhB,OAA2B+C,OAG5BxD,MAAK,SAAA4D,GAAG,OAAIA,EAAI9C,UAChBd,MAAK,SAAA6D,GAAI,OAAIA,MCqFS7D,MAAK,SAAC6D,GACrBA,IACFrB,GAAY,GACZE,GAAYmB,EAAKA,OAEnBnE,GAAQO,KAAK,QAEZC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,OA8BlC,OA1BApC,qBAAU,WACRwF,OACC,IAyBD,kBAACpJ,EAAmBmB,SAApB,CAA6BC,MAAOZ,GAClC,yBAAKjB,UAAU,WACb,yBAAKA,UAAU,QAEb,kBAAC,EAAD,CACEF,MAAOiJ,GAASjJ,MAChBC,SAbO,WACfiK,aAAaI,WAAW,OACxBtB,GAAY,GACZE,GAAY,CAAElJ,MAAO,GAAIuB,IAAK,QAaxB,kBAAC,IAAD,KAEE,kBAAC,IAAD,CAAOd,OAAK,EAACF,KAAK,YAChB,kBAAC,EAAD,CAAO0F,QAnCH,SAACjG,EAAOqG,GACtB,OD/HqB,SAACrG,EAAOqG,GAC/B,OAAOsB,MAAM,GAAD,OAAIO,EAAJ,WAAuB,CACjCnE,OAAQ,OACRkD,QAASA,EACTc,KAAMC,KAAKC,UAAU,CAAEjI,QAAOqG,eAE7BG,MAAM,SAAAY,GAAQ,OAAIA,EAASE,UAC3Bd,MAAK,SAAC6D,GACL,OAAIA,EAAKL,OACPE,aAAaK,QAAQ,MAAOF,EAAKL,OAC1BK,QAEP,KCmHGG,CACMxK,EAAOqG,GACjBG,MAAK,SAAC4D,GACAA,EAMHL,MALAZ,IAAkB,GAClBC,GAAW,gIACXT,GAAwB,WA+BtB,kBAAC,IAAD,CAAOlI,OAAK,EAACF,KAAK,YAChB,kBAAC,EAAD,CAAUwG,WA3EH,SAAC/G,EAAOqG,GACzB,OD1GoB,SAACrG,EAAOqG,GAC9B,OAAOsB,MAAM,GAAD,OAAIO,EAAJ,WAAuB,CACjCnE,OAAQ,OACRkD,QAASA,EACTc,KAAMC,KAAKC,UAAU,CAAEjI,QAAOqG,eAE7BG,MAAK,SAACY,GACL,OAAOA,EAASE,UAEjBd,MAAK,SAAC4D,GAEL,OADAxD,QAAQC,IAAIuD,GACLA,KC+FFI,CACKxK,EAAOqG,GAChBG,MAAK,SAAC4D,GACDA,EAAIC,MACNlB,IAAkB,GAClBC,GAAW,sLACXT,GAAwB,KAGxBQ,IAAkB,GAClBC,GAAW,GAAD,OAAIgB,EAAI1C,MAAR,kBACViB,GAAwB,OAG3BjC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,OA4DcZ,SAAUA,KAG9C,kBAAC,IAAD,KACE,kBAAC,EAAD,CACE/E,YA5Id,SAAyBD,GACvB8H,EAAgB9H,IA4IJ0B,cArJd,WACE4F,GAAwB,IAqJZ7F,WAlJd,WACEiG,GAAqB,IAkJTlG,aA3Jd,WACEgG,GAAuB,IA2JX7F,MAAOA,EACPzB,WApHd,SAAwBF,GACNA,EAAKW,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEL,MAAQJ,EAAYI,OAUzDyF,EAAIyD,YAAY1J,EAAKQ,KAClBiF,MAAK,SAAAkE,GACJ,IAAMC,EAAWjI,EAAMK,KAAI,SAAC6H,GAAD,OAAOA,EAAErJ,MAAQR,EAAKQ,IAAMmJ,EAAUE,KACjE7B,EAAS4B,MAVb3D,EAAI6D,SAAS9J,EAAKQ,KACfiF,MAAK,SAAAkE,GACJ,IAAMC,EAAWjI,EAAMK,KAAI,SAAC6H,GAAD,OAAOA,EAAErJ,MAAQR,EAAKQ,IAAMmJ,EAAUE,KACjE7B,EAAS4B,OA8GHzJ,aAlId,SAA0B4J,GACxB9D,EAAI+D,WAAWD,EAAavJ,KACzBiF,MAAK,WACJuC,EAASrG,EAAMsI,QAAO,SAACjK,GAAD,OAAU+J,EAAavJ,MAAQR,EAAKQ,YAgIlDuE,UAAWxD,EACX7B,OAAK,EAACF,KAAM,IACZwF,SAAUA,KAKd,kBAAC,IAAD,KACGA,EAAW,kBAAC,IAAD,CAAUvF,GAAG,OAAU,kBAAC,IAAD,CAAUA,GAAG,gBAKpD,kBAAC,EAAD,MAEA,kBAAC,EAAD,CACE6C,OAAQ+E,EACR9E,QAAS+F,GACTnF,aAjKV,SAA0B4D,GACxBd,EAAIiE,SAASnD,GACVtB,MAAK,SAAC0E,GAAD,OAAiBpC,EAAeoC,MACrC1E,MAAK,kBAAM6C,WAkKR,kBAAC,EAAD,CACEhG,OAAQmF,EACRlF,QAAS+F,GACT7G,WArJV,SAAwBsF,GACtBd,EAAImE,YAAYrD,GACbtB,MAAK,SAACkE,GAAD,OAAa3B,EAAS,GAAD,mBAAKrG,GAAL,CAAYgI,QACtClE,MAAK,kBAAM6C,WAsJR,kBAAC,EAAD,CACEhG,OAAQiF,EACRhF,QAAS+F,GACTnE,eAzKV,SAA4B4C,GAC1Bd,EAAIoE,aAAatD,GACdtB,MAAK,SAACqD,GAAD,OAAiBf,EAAee,MACrCrD,MAAK,kBAAM6C,WAyKR,kBAAC,EAAD,CACE1F,MAAM,2DACNvB,KAAK,UACLkB,QAAS+F,IAET,4BACErH,KAAK,SACL9B,UAAU,8CAFZ,iBAMF,kBAAC,EAAD,CACEa,KAAM6H,EACNtF,QAAS+F,KAIX,kBAAC,EAAD,CACEhG,OAAQqF,EACRpF,QAAS+F,GACTjG,eAAgBA,GAChBG,QAASA,SClPD8H,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCXNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,KACE,kBAAC,EAAD,QAGJtC,SAASuC,eAAe,SDsHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBxF,MAAK,SAAAyF,GACJA,EAAaC,gBAEdxF,OAAM,SAAAgB,GACLd,QAAQc,MAAMA,EAAMnE,c","file":"static/js/main.25706d02.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo-2.e889e45f.svg\";","module.exports = __webpack_public_path__ + \"static/media/edit-avatar.d476a8b8.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/fail.4072126c.svg\";","import React from 'react';\nimport logo from '../images/logo-2.svg';\nimport { Link } from 'react-router-dom';\nimport { Route } from \"react-router-dom\";\n\n\nfunction Header(props) {\n  const { email, onLogOut } = props;\n  return (\n    <header className=\"header\">\n      <a href=\"# \" className=\"link\">\n        <img src={logo} alt=\"Логотип проекта Mesto Russia\" className=\"logo logo_place_header\" />\n      </a>\n      <div className=\"navbar\">\n        <Route path=\"/sign-up\">\n          <Link to=\"./sign-in\" className=\"button navbar__button\">Войти</Link>\n        </Route>\n        <Route path=\"/sign-in\">\n          <Link to=\"./sign-up\" className=\"button navbar__button\">Регистрация</Link>\n        </Route>\n        <Route exact path=\"/\">\n          <p className=\"navbar__email\">{email}</p>\n          <Link to=\"./sign-in\" onClick={onLogOut} className=\"button navbar__button navbar__button_type_logout\">Выйти</Link>\n        </Route>\n      </div>\n    </header>\n  )\n}\n\nexport default Header;","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\n\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const isOwn = card.owner._id === currentUser._id;\n\n  const cardDeleteButtonClassName = (\n    `button element__remove-button ${isOwn ?\n      'element__remove-button_visible' :\n      'element__remove-button_hidden'}`\n  );\n\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n  const cardLikeButtonClassName = (\n    `button ${isLiked ?\n      'element__like-button element__like-button_active' :\n      'element__like-button'}`\n  );\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n  \n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <li className=\"element\">\n        <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick}/>\n        <div style={{ backgroundImage: `url(${card.link})` }} className=\"element__image\" alt={card.name} onClick={handleClick}></div>\n        <div className=\"element__wrapper_horizontal\">\n          <h2 className=\"element__title\">{`${card.name}`}</h2>\n          <div className=\"element__wrapper_vertical\">\n            <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick}/>\n            <p className=\"element__likes-count\">{`${card.likes.length}`}</p>\n          </div>\n        </div>\n      </li>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default Card;","import React from 'react';\nimport editAvatar from '../images/edit-avatar.svg';\nimport Card from './Card.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main({ onEditAvatar, onAddPlace, onCardClick, onEditProfile, cards, onCardLike, onCardDelete }) {\n\n  const user = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n\n      <section className=\"profile\">\n\n        <div>\n          <button type=\"button\" className=\"profile__avatar-button\" onClick={onEditAvatar}>\n            <img className=\"profile__avatar-edit-icon\" src={editAvatar} alt=\"\" />\n            <div style={{ backgroundImage: `url(${user.avatar})` }} alt=\"Аватар профиля\" className=\"profile__avatar\"></div>\n          </button>\n        </div>\n\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{user.name}</h1>\n          <button type=\"button\" className=\"button profile__edit-button\" onClick={onEditProfile} />\n          <p className=\"profile__job\">{user.about}</p>\n        </div>\n        <button type=\"button\" className=\"button profile__add-button\" onClick={onAddPlace} />\n      </section>\n\n      <ul className=\"elements\">\n        {cards.map((cardElement) => (\n          <Card\n          card={cardElement}\n          onCardClick={onCardClick}\n          key={cardElement._id}\n          onCardLike={onCardLike}\n          onCardDelete={onCardDelete}></Card>\n        ))}\n      </ul>\n\n    </main>\n  )\n}\nexport default Main;","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020. Саша Кожин</p>\n    </footer>\n  );\n}\n\nexport default Footer;","import React from 'react';\nimport successPic from '../images/success.svg';\nimport failPic from '../images/fail.svg';\n\nfunction InfoToolTip({ toolTipSuccess, isOpen, onClose, message }) {\n  return (\n    <>\n      <section className={`popup popup-info ${isOpen ? 'popup_opened' : ''} `}>\n        <div className=\"popup__overlay popup-profile__overlay\" onClick={onClose}></div>\n        <div className=\"popup__container popup-info__container\">\n          {toolTipSuccess ? <img src={successPic} alt=\"\"/> : <img src={failPic} alt=\"\"/>}\n          <h3 className=\"popup__title popup-info__title\">{message}</h3>\n          <button type=\"button\" className=\"button popup__close-button popup-info__close-button\" onClick={onClose} />\n        </div>\n      </section>\n    </>\n  );\n}\n\nexport default InfoToolTip;","import React from 'react';\n\nfunction PopupWithForm({ name, title, children, isOpen, onClose, onSubmit }) {\n  return (\n    <>\n      <section className={`popup popup-${name} ${isOpen ? 'popup_opened' : ''} `}>\n        <div className=\"popup__overlay popup-profile__overlay\" onClick={onClose}></div>\n        <form className={`popup__container popup__form popup__form_type_${name}`} name=\"edit-profile\" action=\"#\" method=\"post\"\n          noValidate onSubmit={onSubmit}>\n          <h3 className=\"popup__title\">{title}</h3>\n          {children}\n          <button type=\"button\" className=\"button popup__close-button popup-profile__close-button\" onClick={onClose} />\n        </form>\n      </section>\n    </>\n  );\n}\n\nexport default PopupWithForm;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\n\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\n  const [name, setName] = React.useState('');\n  const [job, setJob] = React.useState('');\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  }\n\n  function handleJobChange(e) {\n    setJob(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser({name, about: job});\n  }\n\n  const currentUser = React.useContext(CurrentUserContext);\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setJob(currentUser.about);\n  }, [isOpen, currentUser.name, currentUser.about]);\n\n  return (\n    <PopupWithForm\n      title='Редактировать профиль'\n      name='profile'\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        onChange={handleNameChange}\n        value={name}\n        className=\"popup__input popup__input_type_name\"\n        type=\"text\" placeholder=\"Имя\"\n        name=\"name\"\n        required\n        minLength=\"2\"\n        maxLength=\"40\"\n        id=\"name-input\" />\n      <span\n        id=\"name-input-error\"\n        className=\"popup__error\"\n      >Текст ошибки</span>\n      <input\n        onChange={handleJobChange}\n        value={job}\n        className=\"popup__input popup__input_type_job\"\n        type=\"text\"\n        placeholder=\"Профессия\"\n        name=\"about\"\n        required\n        minLength=\"2\"\n        maxLength=\"200\"\n        id=\"job-input\" />\n      <span\n        id=\"job-input-error\"\n        className=\"popup__error\"\n      >Текст ошибки</span>\n      <button\n        type=\"submit\"\n        className=\"popup__submit-button popup-profile__submit-button\"\n      >Сохранить</button>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\n  \n  const avatarInput = React.useRef(); \n\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarInput.current.value\n    });\n  }\n\n  return (\n    <PopupWithForm\n      title='Обновить аватар'\n      name='avatar'\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        ref={avatarInput}\n        className=\"popup__input popup__input_type_avatar\"\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        id=\"avatar-input\"\n        name=\"avatar\"\n        required\n      />\n      <span\n        id=\"avatar-input-error\"\n        className=\"popup__error\"\n      >Текст ошибки</span>\n      <button\n        type=\"submit\"\n        className=\"popup__submit-button popup-avatar__submit_button\"\n      >Сохранить</button>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\n\n  const titleInput = React.useRef();\n  const linkInput = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onAddPlace({\n      title: titleInput.current.value,\n      url: linkInput.current.value\n    });\n  }\n\n  return (\n    <PopupWithForm\n      title='Новое место'\n      name='element'\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        ref={titleInput}\n        className=\"popup__input popup__input_type_title\"\n        type=\"text\"\n        placeholder=\"Название\"\n        name=\"title\"\n        required\n        id=\"title-input\"\n        minLength=\"2\"\n        maxLength=\"30\"\n      />\n      <span\n        id=\"title-input-error\"\n        className=\"popup__error\"\n      >Текст ошибки</span\n      >\n      <input\n        ref={linkInput}\n        className=\"popup__input popup__input_type_url\"\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        id=\"url-input\"\n        name=\"url\"\n        required\n      />\n      <span\n        id=\"url-input-error\"\n        className=\"popup__error\"\n      >Текст ошибки</span\n      >\n      <button\n        type=\"submit\"\n        className=\"popup__submit-button popup-element__submit_button\"\n      >Сохранить</button\n      >\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;","import React from 'react';\n\nfunction ImagePopup({ card, onClose }) {\n  let name = '';\n  let link = '';\n  if (card) {\n    name = card.name;\n    link = card.link;\n  }\n  return (\n    <section className={`popup popup-image ${(card) ? 'popup_opened' : ''} `}>\n      <div className=\"popup__overlay popup-image__overlay\" onClick={onClose}></div>\n      <div className=\"popup-image__wrapper\">\n        <div style={{ backgroundImage: `url(${link})` }} alt={name} className=\"popup-image__image\"></div>\n        <p className=\"popup-image__caption\">{name}</p>\n        <button type=\"button\" className=\"button popup__close-button popup-image__close-button\" onClick={onClose} />\n      </div>\n    </section>\n  );\n}\n\nexport default ImagePopup;","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n      }\n    </Route>\n)}\n\nexport default ProtectedRoute; ","import React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\n\nfunction Login({ onLogin }) {\n  const history = useHistory();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const resetForm = () => {\n    setEmail('');\n    setPassword('');\n  }\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    onLogin(email, password)\n      .then(() => resetForm())\n      .then(() => history.push('/'))\n      .catch((err) => console.log(err));\n  };\n\n  return (\n    <div className=\"auth\">\n      <h2 className=\"auth__header\">Вход</h2>\n      <form className=\"auth__form auth__form_type_login\" onSubmit={handleSubmit}>\n        <input className=\"auth__input\" id=\"email\" required name=\"email\" type=\"email\" placeholder=\"Email\" value={email} onChange={(evt) => setEmail(evt.target.value)} />\n        <input className=\"auth__input\" id=\"password\" required name=\"password\" type=\"password\" placeholder=\"Пароль\" value={password} onChange={(evt) => setPassword(evt.target.value)} />\n        <button className=\"auth__submit\" type=\"submit\">Войти</button>\n      </form>\n      <Link to=\"./sign-up\" className=\"button auth__link\">Ещё не зарегистрированы? Регистрация</Link>\n    </div>\n  );\n}\n\nexport default Login;","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register({ onRegister }) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const resetForm = () => {\n    setEmail('');\n    setPassword('');\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    onRegister(email, password)\n      .then(() => resetForm())\n      .catch((err) => console.log(err));\n  };\n\n  return (\n    <div className=\"auth\">\n      <h2 className=\"auth__header\">Регистрация</h2>\n      <form className=\"auth__form auth__form_type_register\" onSubmit={handleSubmit}>\n        <input className=\"auth__input\" id=\"email\" name=\"email\" type=\"email\" placeholder=\"Email\" value={email} onChange={(evt) => setEmail(evt.target.value)} />\n        <input className=\"auth__input\" id=\"password\" name=\"password\" type=\"password\" placeholder=\"Пароль\" value={password} onChange={(evt) => setPassword(evt.target.value)} />\n        <button className=\"auth__submit\" type=\"submit\">Зарегистрироваться</button>\n      </form>\n      <Link to=\"./sign-in\" className=\"button auth__link\">Уже зарегистрированы? Войти</Link>\n    </div>\n  );\n}\n\nexport default Register;","import { config } from \"../utils/utils.js\";\n// класс взаимодействия с сервером\n\nexport class Api {\n  constructor({ url, headers = {} }) {\n    this.url = url;\n    this.headers = headers;\n    this.authorization = headers.authorization;\n  }\n\n  // обработка ответа с сервера\n\n  _handleResponse(response) {\n    if (response.ok) {\n      return response.json();\n    } else {\n      return Promise.reject(`Oops, response is not ok. Status: ${response.status}`);\n    }\n  }\n\n  // обработка ошибок\n  _handleError(error) {\n    console.error(`Oops, an error occured: ${error}`)\n    return Promise.reject(error.message)\n  }\n\n  // получить профиль с сервера\n  getInfo() {\n    return fetch(`${this.url}users/me`, { headers: this.headers })\n      .then(response => this._handleResponse(response))\n      .catch(this._handleError)\n  }\n\n  // получить массив изначальных карточек\n  getInitialCards() {\n    return fetch(`${this.url}cards`, { headers: this.headers })\n      .then(response => this._handleResponse(response))\n      .catch(this._handleError)\n  }\n\n  // отправить обновленный профиль юзера на сервер\n  editInfo(obj) {\n    return fetch(`${this.url}users/me`,\n      {\n        method: 'PATCH',\n        headers: this.headers,\n        body: JSON.stringify({\n          name: obj.name,\n          about: obj.about\n        })\n      })\n      .then(response => this._handleResponse(response))\n      .catch(this._handleError)\n  }\n\n  // отправить карточку на сервер\n  sendElement(obj) {\n    return fetch(`${this.url}cards`,\n      {\n        method: 'POST',\n        headers: this.headers,\n        body: JSON.stringify({\n          name: obj.title,\n          link: obj.url\n        })\n      })\n      .then(response => this._handleResponse(response))\n      .catch(this._handleError)\n  }\n\n  // сменить аватарку на сервере\n  changeAvatar(obj) {\n    return fetch(`${this.url}users/me/avatar`,\n      {\n        method: 'PATCH',\n        headers: this.headers,\n        body: JSON.stringify({\n          avatar: obj.avatar\n        })\n      })\n      .then(response => this._handleResponse(response))\n      .catch(this._handleError)\n  }\n\n  // удалить карточку\n  removeCard(_id) {\n    return fetch(`${this.url}cards/${_id}`, {\n      method: 'DELETE',\n      headers: this.headers\n    })\n      .then(response => this._handleResponse(response))\n      .catch(this._handleError)\n  }\n\n  // поставить лайк\n  likeCard(_id) {\n    return fetch(`${this.url}cards/likes/${_id}`, {\n      method: 'PUT',\n      headers: this.headers\n    })\n      .then(response => this._handleResponse(response))\n      .catch(this._handleError)\n  }\n\n  // снять лайк\n  dislikeCard(_id) {\n    return fetch(`${this.url}cards/likes/${_id}`, {\n      method: 'DELETE',\n      headers: this.headers\n    })\n      .then(response => this._handleResponse(response))\n      .catch(this._handleError)\n  }\n}\n\n// создаем экземпляр Api\nexport const api = new Api(config);","export const config = {\n  url: 'https://mesto.nomoreparties.co/v1/cohort-13/',\n  headers: {\n    authorization: '9b4159b0-f593-4984-be9b-af6528533bd7',\n    'Content-Type': 'application/json'\n  }\n}","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nexport const headers = {\n  'Content-Type': 'application/json'\n};\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: headers,\n    body: JSON.stringify({ email, password })\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((res) => {\n      console.log(res);\n      return res;\n    })\n};\n\nexport const authorize = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: headers,\n    body: JSON.stringify({ email, password })\n  })\n    .then((response => response.json()))\n    .then((data) => {\n      if (data.token) {\n        localStorage.setItem('jwt', data.token);\n        return data;\n      } else {\n        return;\n      }\n    })\n};\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      ...headers,\n      'Authorization': `Bearer ${token}`,\n    }\n  })\n    .then(res => res.json())\n    .then(data => data)\n};","import React, { useEffect, useState } from 'react';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport InfoToolTip from './InfoTooltip.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js'\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ImagePopup from './ImagePopup.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\nimport { api } from '../utils/api.js';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport * as auth from '../auth.js';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n  const [isInfoToolTipPopupOpen, setInfoToolTipPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState();\n  const [currentUser, setCurrentUser] = useState({ name: '', about: '' });\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userData, setUserData] = useState({ email: '', _id: '' });\n  const [toolTipSuccess, setToolTipSuccess] = useState(false);\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    Promise.all([api.getInfo(), api.getInitialCards()])\n      .then(([userProfile, cardsArray]) => {\n        setCurrentUser(userProfile)\n        setCards(cardsArray)\n      })\n  }, [])\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleUpdateUser(obj) {\n    api.editInfo(obj)\n      .then((updatedUser) => setCurrentUser(updatedUser))\n      .then(() => closeAllPopups())\n  }\n\n  function handleUpdateAvatar(obj) {\n    api.changeAvatar(obj)\n      .then((userProfile) => setCurrentUser(userProfile))\n      .then(() => closeAllPopups())\n  }\n\n  function handleCardDelete(cardToDelete) {\n    api.removeCard(cardToDelete._id)\n      .then(() => {\n        setCards(cards.filter((card) => cardToDelete._id !== card._id))\n      })\n  }\n\n  function handleAddPlace(obj) {\n    api.sendElement(obj)\n      .then((newCard) => setCards([...cards, newCard]))\n      .then(() => closeAllPopups())\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    if (!isLiked) {\n      api.likeCard(card._id)\n        .then(newCard => {\n          const newCards = cards.map((c) => c._id === card._id ? newCard : c)\n          setCards(newCards)\n        })\n    }\n    else {\n      api.dislikeCard(card._id)\n        .then(newCard => {\n          const newCards = cards.map((c) => c._id === card._id ? newCard : c)\n          setCards(newCards)\n        })\n    }\n  }\n\n  function closeAllPopups() {\n    if (document.querySelector('.popup_opened')) {\n      document.querySelector('.popup_opened').classList.remove('popup_opened');\n      setEditAvatarPopupOpen(false);\n      setEditProfilePopupOpen(false);\n      setAddPlacePopupOpen(false);\n      setSelectedCard(null);\n    }\n  }\n\n  const history = useHistory();\n\n  const onRegister = (email, password) => {\n    return auth\n      .register(email, password)\n      .then((res) => {\n        if (res.data) {\n          setToolTipSuccess(true)\n          setMessage('Вы успешно зарегистрировались! 🔥')\n          setInfoToolTipPopupOpen(true)\n        }\n        else {\n          setToolTipSuccess(false)\n          setMessage(`${res.error} 😔`)\n          setInfoToolTipPopupOpen(true)\n        }\n      })\n      .catch((err) => console.log(err))\n  };\n\n  const tokenCheck = () => {\n    let jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      auth.getContent(jwt).then((data) => {\n        if (data) {\n          setLoggedIn(true)\n          setUserData(data.data)\n        }\n        history.push('/');\n      })\n        .catch((err) => console.log(err))\n    }\n  };\n\n  useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  const onLogin = (email, password) => {\n    return auth\n      .authorize(email, password)\n      .then((res) => {\n        if (!res) {\n          setToolTipSuccess(false);\n          setMessage(`Неверный email или пароль. 😔`);\n          setInfoToolTipPopupOpen(true);\n        }\n        else {\n          tokenCheck();\n        }\n      }\n      );\n  }\n\n  const onLogOut = () => {\n    localStorage.removeItem('jwt');\n    setLoggedIn(false);\n    setUserData({ email: '', _id: '' });\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"project\">\n        <div className=\"page\">\n\n          <Header\n            email={userData.email}\n            onLogOut={onLogOut}\n          />\n\n          <Switch>\n\n            <Route exact path=\"/sign-in\">\n              <Login onLogin={onLogin} />\n            </Route>\n\n            <Route exact path=\"/sign-up\">\n              <Register onRegister={onRegister} loggedIn={loggedIn} />\n            </Route>\n\n            <Route>\n              <ProtectedRoute\n                onCardClick={handleCardClick}\n                onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick}\n                onEditAvatar={handleEditAvatarClick}\n                cards={cards}\n                onCardLike={handleCardLike}\n                onCardDelete={handleCardDelete}\n                component={Main}\n                exact path={'/'}\n                loggedIn={loggedIn}\n              >\n              </ProtectedRoute>\n            </Route>\n\n            <Route>\n              {loggedIn ? <Redirect to='./' /> : <Redirect to='./sign-in' />}\n            </Route>\n            \n          </Switch>\n\n          <Footer />\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          >\n          </EditProfilePopup>\n\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlace}\n          >\n          </AddPlacePopup>\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n\n          <PopupWithForm\n            title='Вы уверены?'\n            name='confirm'\n            onClose={closeAllPopups}\n          >\n            <button\n              type=\"button\"\n              className=\"popup__submit-button popup-confirm__button\"\n            >Да</button>\n          </PopupWithForm>\n\n          <ImagePopup\n            card={selectedCard}\n            onClose={closeAllPopups}\n          >\n          </ImagePopup>\n\n          <InfoToolTip\n            isOpen={isInfoToolTipPopupOpen}\n            onClose={closeAllPopups}\n            toolTipSuccess={toolTipSuccess}\n            message={message}\n          />\n\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}